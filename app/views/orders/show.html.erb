<%= render 'shared/navbar' %>
<%= render 'shared/wrapper' %>
<div id="unit-price" style="display:none;"><%= @category.price %></div>
<div id="quantity-order"style="display:none;"><%= @order.quantity %></div>

<div class="container">
  <div class="card-container-show">
    <div class="card-block-plan">
      <form id="formID" action="/payments" method="post">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      </form>
      <div class="card-plan">
        <div class="checkout-block">
          <h2>Information personnelles</h2>
        </div>
        <div class="checkout-block">
          <label for="firstname" class="checkout-label">Prénom *</label>
          <div class="checkout-input">
            <input type="text" name="firstname" value="<%= @user.first_name %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="lastname" class="checkout-label">Nom *</label>
          <div class="checkout-input">
            <input type="text" name="lastname" value="<%= @user.last_name %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="email" class="checkout-label">Votre adresse e-mail *</label>
          <div class="checkout-input">
            <input type="text" name="email" value="<%= @user.email %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
      </div>
      <div class="card-plan">
        <div class="checkout-block">
          <h2>Adresse de livraison</h2>
        </div>
        <div class="checkout-block">
          <label for="shipping_address" class="checkout-label">Adresse *</label>
          <div class="checkout-input">
            <input type="text" name="shipping_address" value="<%= @user.address %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="shipping_address_bis" class="checkout-label">Complément d'adresse</label>
          <div class="checkout-input">
            <input type="text" name="shipping_address_bis" value="" form="formID" placeholder="Veuillez saisir les informations">
          </div>
        </div>
        <div class="checkout-block">
          <label for="shipping_zip_code" class="checkout-label">Code Postal *</label>
          <div class="checkout-input">
            <input type="text" name="shipping_zip_code" value="<%= @user.zip_code %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="shipping_city" class="checkout-label">Ville *</label>
          <div class="checkout-input">
            <input type="text" name="shipping_city" value="<%= @user.city %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="shipping_country" class="checkout-label">Pays *</label>
          <div class="checkout-input">
            <input type="text" name="shipping_country" value="<%= @user.country %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="shipping_phone_number" class="checkout-label">Téléphone *</label>
          <div class="checkout-input">
            <input type="text" name="shipping_phone_number" value="<%= @user.phone_number %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <input id="permitted" type="checkbox" checked>
          <label for="permitted">L'adresse de facturation est la même</label>
        </div>
      </div>
      <div class="card-plan invoicing hidden">
        <div class="checkout-block">
          <h2>Adresse de facturation</h2>
        </div>
        <div class="checkout-block">
          <label for="billing_address" class="checkout-label">Adresse *</label>
          <div class="checkout-input">
            <input type="text" name="billing_address" value="<%= @user.address %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="billing_address_bis" class="checkout-label">Complément d'adresse</label>
          <div class="checkout-input">
            <input type="text" name="billing_address_bis" value="" form="formID" placeholder="Veuillez saisir les informations">
          </div>
        </div>
        <div class="checkout-block">
          <label for="billing_zip_code" class="checkout-label">Code Postal *</label>
          <div class="checkout-input">
            <input type="text" name="billing_zip_code" value="<%= @user.zip_code %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="billing_city" class="checkout-label">Ville *</label>
          <div class="checkout-input">
            <input type="text" name="billing_city" value="<%= @user.city %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="billing_country" class="checkout-label">Pays *</label>
          <div class="checkout-input">
            <input type="text" name="billing_country" value="<%= @user.country %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
        <div class="checkout-block">
          <label for="billing_phone_number" class="checkout-label">Téléphone *</label>
          <div class="checkout-input">
            <input type="text" name="billing_phone_number" value="<%= @user.phone_number %>" form="formID" placeholder="Veuillez saisir les informations" required>
          </div>
        </div>
      </div>
    </div>
    <div class="card-block-info">
      <div class="card-plan">
        <h2>Informations complémentaires</h2>
        <ul>
          <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Alfred Ticket est un service de réservation agissant en qualité de mandataire. À la suite de votre demande, nous réservons les billets demandés auprès des organisateurs, des billetteries, et des sites marchands.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Le prix facturé comprend le coût des billets, les frais de mandat et les frais de ports éventuels.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Le coût du mandat est fixé en fonction de la difficulté attendue pour réserver vos billets.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Les places assises d’une même commande sont situées côte à côte.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>L’expédition en billet électronique est fiable, et vous ne risquez pas de l’égarer.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Les délais de livraisons peuvent varier. Vos places pourront vous être envoyées jusqu’à deux semaines avant le concert, habituellement sous 4 semaines. Si vous êtes pressés, souscrivez à l’option Fast Delivery.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Le droit de rétractation n’est pas applicable car nos bookers commencent la recherche de vos places en votre nom et pour votre compte dès la validation de la commande.</li>
          </div>
           <div class="card-plan-content">
            <i class="fas fa-caret-right"></i>
            <li>Médiation: Pour toute demande de recours, vous pouvez utiliser le service de médiation gratuit www.medicys.fr</li>
          </div>
        </ul>
      </div>
    </div>
    <div class="card-block-order">
      <div class="card-plan">
        <div class="checkout-block">
          <h2>Détails de la commande</h2>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Artiste: </div>
          <div class="checkout-content"><%= @concert.artist_name %></div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Date: </div>
          <div class="checkout-content"><%= @event_date %></div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Salle/stade: </div>
          <div class="checkout-content"><%= @concert.concert_hall.hall_name %></div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Nombres de billet(s): </div>
          <div class="checkout-content"><%= @order.quantity %> x <%= @category.category_name %> (<%= humanized_money(@category.price) %><%= currency_symbol %>) = <%= humanized_money(@order.quantity*@category.price) %><%= currency_symbol %></div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Frais de réservation:<span class="infobulle" aria-label="Les frais de gestion sont calculés par billet."><i class="fas fa-info-circle"></i></span></div>
          <div class="checkout-content"><%= @order.quantity %> x <%= humanized_money(@management_fees) %><%= currency_symbol %></div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Type de livraison </div>
          <div class="checkout-content">
            <input id="fast-delivery" type="radio" name="payments[delivery]" value="fast" form="formID">
            <label for="fast-delivery">Fast delivery: 5,00<%= currency_symbol %><span class="infobulle" aria-label="Le service fast delivery vous assure la réception des places dans un délai maximum de 2 semaines après la mise en vente officielle."><i class="fas fa-info-circle"></i></span></label>
          </div>
          <div class="checkout-content">
            <input id="standard-delivery" type="radio" name="payments[delivery]" value="fast" form="formID" checked>
            <label for="standard-delivery">Standard: 0,00<%= currency_symbol %><span class="infobulle" aria-label="La livraison standard vous assure la réception des billets dans un délai maximum de 2 semaines avant le début du concert."><i class="fas fa-info-circle"></i></span></label>
          </div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Support de livraison</div>
          <div class="checkout-content">E-billet: 0,00<%= currency_symbol %></div>
        </div>

        <div class="checkout-block">
          <div class="checkout-title">TVA</div>
          <div class="checkout-content">
            <span class="TVA"><%= humanized_money((@order.quantity*@category.price+@management_fees)*20/100) %></span>
            <%= currency_symbol %>
          </div>
        </div>
        <div class="checkout-block">
          <div class="checkout-title">Total TTC</div>
          <div class="checkout-content">
            <span class="TTC">
              <%= humanized_money((@order.quantity*@category.price+@management_fees)*1.2)  %>
            </span>
            <%= currency_symbol %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
